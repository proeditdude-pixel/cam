<!DOCTYPE html>
<html>
<head>
  <title>AI Basketball Trigger</title>
  <link rel="stylesheet" href="https://unpkg.com/handsfree@8.5.1/dist/handsfree.css" />
  <script src="https://unpkg.com/handsfree@8.5.1/dist/handsfree.js"></script>

  <style>
    body { margin: 0; background: #1a1a1a; color: white; font-family: sans-serif; overflow: hidden; }
    
    /* The Image to show */
    #basketball-img {
      display: none; /* Hidden by default */
      position: absolute;
      right: 50px;
      top: 50px;
      width: 400px;
      border: 5px solid #ff6600;
      border-radius: 15px;
      z-index: 100;
    }

    .status {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.7);
      padding: 10px 20px;
      border-radius: 50px;
    }

    /* Make the webcam visible but mirrored */
    .handsfree-canvas-video {
      transform: scaleX(-1);
    }
  </style>
</head>
<body>

  <div class="status" id="label">Waiting for camera...</div>
  
  <img id="basketball-img" src="https://preview.redd.it/pi38ojxhy3801.png?auto=webp&s=9da1f554e316d41251505a76412e5b2d92aec33d" />

  <script>
    // 1. Initialize the "Hands" tracker
    const handsfree = new Handsfree({
      hands: true,
      showDebug: true // This shows the skeleton so you know it's working
    })

    const img = document.getElementById('basketball-img');
    const label = document.getElementById('label');

    // 2. Start the tracking
    handsfree.start();

    // 3. Every frame, check where the hand is
    handsfree.use('lookForShot', (data) => {
      if (!data.hands || !data.hands.landmarks) {
        label.innerText = "No hand detected. Wave at the camera!";
        img.style.display = 'none';
        return;
      }

      // Get the landmarks for the first hand detected
      const landmarks = data.hands.landmarks[0];
      
      // Landmark 0 is the WRIST
      // Landmark 8 is the INDEX FINGER TIP
      // In screen coordinates, a SMALLER Y value means "HIGHER" on the screen.
      
      const wristY = landmarks[0].y;
      const fingerTipY = landmarks[8].y;

      // TRIGGER LOGIC: 
      // If the wrist is in the top half of the screen (wristY < 0.4)
      // and the finger is pointing down (fingerTipY > wristY)
      if (wristY < 0.4 && fingerTipY > wristY) {
        img.style.display = 'block';
        label.innerText = "KOBE! ðŸ”¥";
        label.style.color = "#ff6600";
      } else {
        img.style.display = 'none';
        label.innerText = "Ready to shoot...";
        label.style.color = "white";
      }
    });
  </script>
</body>
</html>
